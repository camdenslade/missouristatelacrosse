files:
  "/opt/elasticbeanstalk/hooks/appdeploy/enact/99_restart_docker_log.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # Ensure Docker logging directory exists
      mkdir -p /var/log/eb-docker/containers/eb-current-app
      chmod -R 755 /var/log/eb-docker
      
      # Restart the eb-docker-log service if it exists
      if systemctl list-unit-files | grep -q eb-docker-log.service; then
        systemctl restart eb-docker-log.service || true
      fi

